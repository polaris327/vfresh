<div class="note">
    <div class="row">
        <div class="col-sm-12">
            <h4 class="pull-left bold">
                <span class="uppercase link"><i class="fa fa-search"></i>&nbsp;Search</span>
            </h4>
            <h4 class="pull-right bold">
                <span class="link" ng-show="!AdvanceSearch" ng-click="AdvanceSearch = true">
                    <img src="theme/img/searchAdvanced.png" tooltip="Swap to Advance Search" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" />
                    <h5>More options</h5>
                </span>
                <span class="link" ng-show="AdvanceSearch" ng-click="AdvanceSearch = false">
                    <img src="theme/img/searchBasic.png" tooltip="Swap to Basic Search" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" />
                    <h5>Less options</h5>
                </span>
            </h4>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 text-center">
            <div class="btn-group" role="group" aria-label="...">
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default" ng-model="ViewShipment.alertsOnly" ng-class="{'green': ViewShipment.alertsOnly == true}" ng-click="ViewShipment.alertsOnly = true;">Shipments with alerts</button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" ng-model="ViewShipment.alertsOnly" ng-class="{'green': ViewShipment.alertsOnly == false}" ng-click="ViewShipment.alertsOnly = false;" class="btn btn-default">All shipments</button>
                </div>
            </div>
            <div class="btn-group" role="group" aria-label="...">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </div>
            <div class="col-sm-12 visible-xs visible-sm">&nbsp;</div>
            <div class="btn-group" role="group" aria-label="...">
                <div class="btn-group" role="group">
                    <button ng-model="ViewShipment.lastDay" ng-click="ViewShipment.lastDay = !ViewShipment.lastDay;specificDates = false;ViewShipment.shipmentDateFrom=null;ViewShipment.shipmentDateTo=null;" ng-class="{'green': ViewShipment.lastDay == true}" type="button" class="btn btn-default">Last 24 hours</button>
                </div>
                <div class="btn-group" role="group">
                    <button ng-model="ViewShipment.last2Days" ng-click="ViewShipment.last2Days = !ViewShipment.last2Days;specificDates = false;ViewShipment.shipmentDateFrom=null;ViewShipment.shipmentDateTo=null;" ng-class="{'green': ViewShipment.last2Days == true}" type="button" class="btn btn-default">Last 48 hours</button>
                </div>
                <div class="btn-group" role="group">
                    <button ng-model="ViewShipment.lastWeek" ng-click="ViewShipment.lastWeek = !ViewShipment.lastWeek;specificDates = false;ViewShipment.shipmentDateFrom=null;ViewShipment.shipmentDateTo=null;" ng-class="{'green': ViewShipment.lastWeek == true}" type="button" class="btn btn-default">Last 7 days</button>
                </div>
                <div class="btn-group" role="group">
                    <button ng-model="ViewShipment.lastMonth" ng-click="ViewShipment.lastMonth = !ViewShipment.lastMonth;specificDates = false;ViewShipment.shipmentDateFrom=null;ViewShipment.shipmentDateTo=null;" ng-class="{'green': ViewShipment.lastMonth == true}" type="button" class="btn btn-default">Last 30 days</button>
                </div>
            </div>
            <div class="col-sm-12 visible-xs">&nbsp;</div>
            <div class="btn-group">
                <button type="button" class="btn default" ng-click="specificDates = !specificDates;ViewShipment.lastDay = false;ViewShipment.last2Days=false;ViewShipment.lastWeek=false;ViewShipment.lastMonth=false">
                    <i class="fa fa-calendar"></i>
                </button>
            </div>
        </div>
    </div>
    <div ng-if="specificDates">
        <div class="row">
            <div class="col-sm-12">
                &nbsp;
            </div>
        </div>
        <div class="row">
            <div class="col-sm-offset-3 col-sm-3">
                <label>Date From</label>
                <div class="input-group">
                    <input show-button-bar="false" id="DateFrom" type="text" class="form-control" placeholder="Select Date From" datepicker-popup="dd-MMM-yyyy" ng-model="ViewShipment.shipmentDateFrom" close-text="Close" />
                    <label for="DateFrom" class="input-group-addon">
                        <i class="glyphicon glyphicon-calendar"></i>
                    </label>
                </div>
            </div>
            <div class="col-sm-3">
                <label>Date To</label>
                <div class="input-group">
                    <input show-button-bar="false" id="txtDateTo" type="text" class="form-control" min="ViewShipment.shipmentDateFrom" placeholder="Select Date To" datepicker-popup="dd-MMM-yyyy" ng-model="ViewShipment.shipmentDateTo" close-text="Close" />
                    <label for="txtDateTo" class="input-group-addon">
                        <i class="glyphicon glyphicon-calendar"></i>
                    </label>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            &nbsp;
        </div>
    </div>
    <div class="row" ng-show="!AdvanceSearch">
        <div class="col-sm-12 text-center">
            <button class="btn green" type="button" ng-click="SearchBasic()"><i class="fa fa-search"></i>&nbsp;Search</button>
            <button class="btn default" type="button" ng-click="ResetSearchCriteria()"><i class="fa fa-times"></i>&nbsp;Reset</button>
        </div>
    </div>
    <div ng-if="AdvanceSearch">
        <div class="row">
            <div class="col-sm-12">
                &nbsp;
            </div>
        </div>
        <div class="row">
            <div class="col-sm-3">
                <label>Shipped From</label>
                <select style="width:100%" multiple ui-select2="LocationOptions" ng-model="ViewShipment.shippedFrom" data-placeholder="Select Shipped From">
                    <option ng-repeat="location in LocationList" value="{{location.locationId}}">{{location.DisplayText}}</option>
                </select>
            </div>
            <div class="col-sm-3">
                <label>Shipped To</label>
                <select style="width:100%" multiple ui-select2="LocationOptions" ng-model="ViewShipment.shippedTo" data-placeholder="Select Shipped To">
                    <option ng-repeat="location in LocationList" value="{{location.locationId}}">{{location.DisplayText}}</option>
                </select>
            </div>
            <div class="col-sm-2">
                <label>Goods</label>
                <input type="text" class="form-control" ng-model="ViewShipment.shipmentDescription" placeholder="Description" />
            </div>
            <div class="col-sm-2">
                <label>Device</label>
                <select class="form-control " ng-model="ViewShipment.deviceImei" ng-options="tracker.imei as (tracker.sn + ' - ' + tracker.name + ' - ' + tracker.description) for tracker in TrackerList">
                    <option value="">-- Please Select --</option>
                </select>
            </div>
            <div class="col-sm-2">
                <label>Status</label>
                <select class="form-control input-sm" ng-model="ViewShipment.status">
                    <option value="">-- Please Select --</option>
                    <option value="InProgress">InProgress</option>
                    <option value="Arrived">Arrived</option>
                    <option value="AutoStart">AutoStart</option>
                    <option value="Ended">Ended</option>
                </select>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                &nbsp;
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 text-center">
                <button class="btn green" type="button" ng-click="SearchAdvance()"><i class="fa fa-search"></i>&nbsp;Search</button>
                <button class="btn default" type="button" ng-click="ResetSearchCriteria()"><i class="fa fa-times"></i>&nbsp;Reset</button>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        &nbsp;
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        &nbsp;
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        <!--<div>
            <div class="alert alert-success text-center" role="alert">
                No Record(s) Found
            </div>
        </div>-->
        <div class="text-center" style=" background-color: white;
    padding: 20px;">
            <h4 class="uppercase bold pull-left">
                <i class="fa fa-truck fa-lg"></i> Shipments
            </h4>
            <span class="text-error" style="vertical-align:middle" ng-if="loading">Retrieving your shipment data...</span>
            <h4 class="pull-right">
                <button class="btn default btn-sm uppercase" type="button" ng-click="Print()"><i class="fa fa-times"></i>&nbsp;Print</button>
            </h4>
            <div class="clearfix"></div>
            <hr />
            <div class="row">
                <div class="col-sm-12">
                    <div class="pull-left">
                        Show:
                        <select class="form-control" style="width:auto;display:inline-block" ng-change="PageSizeChanged()" ng-model="ViewShipment.pageSize">
                            <option value="10" selected>10</option>
                            <option value="20">20</option>
                            <option value="50">50</option>
                            <option value="100">100</option>
                        </select>
                    </div>

                    <div class="pull-right">
                        Sort By:
                        <select class="form-control" style="width:auto;display:inline-block" ng-change="SortOptionChanged()" ng-model="sc">
                            <option value="shipmentId1">CreationDate (Newest at top)</option>
                            <option value="shipmentId">CreationDate (Oldest at top)</option>
                            <option value="actualArrivalDate1">Date of Arrival (Newest at top)</option>
                            <option value="actualArrivalDate">Date of Arrival (Oldest at top)</option>
                            <option value="shipmentDate1">Date Shipped (Newest at top)</option>
                            <option value="shipmentDate">Date Shipped (Oldest at top)</option>
                            <option value="shipmentDescription">Description (A-Z)</option>
                            <option value="shipmentDescription1">Description (Z-A)</option>
                            <option value="shippedFrom">Shipped From (A-Z)</option>
                            <option value="shippedFrom1">Shipped From (Z-A)</option>
                            <option value="shippedTo">Shipped To (A-Z)</option>
                            <option value="shippedTo1">Shipped To (Z-A)</option>
                            <option value="status">Status</option>
                            <option value="deviceSN">Tracker Num (1-9)</option>
                            <option value="deviceSN1">Tracker Num (9-1)</option>
                        </select>
                    </div>
                </div>
                <div class="clearfix"></div>

                <div class="map-container" style="display: none;">
                    <ng-map 
                        style="height:600px"
                        disable-default-u-i="true"
                        map-type-control-options="{
                            mapTypeIds: ['ROADMAP']
                        }"
                    >
                    </ng-map>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <br>
                    <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <tr>
                    <th class="text-center" ng-click="Sorting('sn')">
                        <span class="pull-left">Device
                            <i tooltip="The unique 6 digit number on each tracker" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='sn'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='sn'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th ng-click="Sorting('name')">
                        <span class="pull-left">Trip
                            <i tooltip="A meaningful short name you assign to each tracker" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='name'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='name'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th ng-click="Sorting('description')">
                        <span class="pull-left">Description
                            <i tooltip="A meaningful description you assign to each tracker" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='description'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='description'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th class="text-center" ng-click="Sorting('imei')">
                        <span class="pull-left">IMEI
                            <i tooltip="The unique international identify of each tracker" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='imei'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='imei'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th class="text-center" ng-click="Sorting('active')">
                        <span class="pull-left">Active
                            <i tooltip="Active trackers are available for usage" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='active'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='active'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th class="text-center" ng-click="Sorting('active')">
                        <span class="pull-left">Last Reading
                            <i tooltip="Active trackers are available for usage" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='active'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='active'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th class="text-center" ng-click="Sorting('active')">
                        <span class="pull-left">Temp.
                            <i tooltip="Active trackers are available for usage" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='active'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='active'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th class="text-center" ng-click="Sorting('active')">
                        <span class="pull-left">Battery
                            <i tooltip="Active trackers are available for usage" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='active'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='active'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                    <th class="text-center" ng-click="Sorting('active')">
                        <span class="pull-left">Shipment
                            <i tooltip="Active trackers are available for usage" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                        </span>
                        <span class="pull-right" style="position:relative;">
                            <a ng-class="{'active-sort':So=='asc' && Sc=='active'}"><i class="fa fa-sort-asc" style="position:absolute"></i></a>
                            <a ng-class="{'active-sort':So=='desc' && Sc=='active'}"><i class="fa fa-sort-desc"></i></a>
                        </span>
                    </th>
                </tr>
                <tr ng-repeat="tracker in TrackerList">
                    <td ng-bind="tracker.sn"></td>
                    <td ng-bind="tracker.name"></td>
                    <td ng-bind="tracker.description"></td>
                    <td ng-bind="tracker.imei"></td>
                    <td></td>
                    <td ng-bind="tracker.lastReadingTimeISO"></td>
                    <td ng-bind="tracker.lastReadingTemperature"></td>
                    <td ng-bind="tracker.lastReadingBattery"></td>
                    <td ng-bind="tracker.lastShipmentId"></td>
                </tr>
            </table>
        </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6" ng-repeat="shipment in ShipmentList">
                    <div class="portlet box green">
                        <div class="portlet-title">
                            <div class="caption">
                                {{shipment.shipmentDescription}}
                            </div>
                            <div class="pull-right" style="margin-top:6px">
                                <a href="/#/view-shipment-detail/{{shipment.shipmentId}}" class="btn btn-sm green-meadow" style="background-color:green;border-color:green">View</a>
                            </div>
                        </div>
                        <div class="portlet-body" style="position:relative">
                            <div class="row">
                                <div class="col-sm-12">
                                    <h4 class="pull-left">Tracker {{shipment.deviceSN}} ({{shipment.tripCount}})</h4>
                                    <h4 class="pull-right">
                                        <img src="theme/img/alertLightOn.png" ng-if="shipment.alertSummary.LightOn" />
                                        <img src="theme/img/alertLightOff.png" ng-if="shipment.alertSummary.LightOff" />
                                        <img src="theme/img/alertCold.png" ng-if="shipment.alertSummary.Cold" />
                                        <img src="theme/img/alertHot.png" ng-if="shipment.alertSummary.Hot" />
                                        <img src="theme/img/alertCriticalCold.png" ng-if="shipment.alertSummary.CriticalCold" />
                                        <img src="theme/img/alertCriticalHot.png" ng-if="shipment.alertSummary.CriticalHot" />
                                        <img src="theme/img/alertBattery.png" ng-if="shipment.alertSummary.Battery" />
                                        <img src="theme/img/alertShock.png" ng-if="shipment.alertSummary.MovementStart" />
                                    </h4>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        &nbsp;
                                    </div>
                                </div>
                                <div class="col-sm-12">
                                    <p class="col-xs-1 text-left no-margin no-padding"><i class="fa fa-home"></i></p>
                                    <p class="col-xs-10 no-margin no-padding text-center">{{shipment.assetType}} {{shipment.assetNum}} <span ng-if="shipment.assetType != null || shipment.assetNum != null">-</span> {{shipment.status}}</p>
                                    <p class="col-xs-1 text-right no-margin no-padding"><i class="fa fa-map-marker"></i></p>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-sm-12">
                                    <div class="progress" style="max-height:5px">
                                        <div style="width: {{(shipment.percentageComplete + 1) * 100 / 101}}%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="{{shipment.percentageComplete}}" role="progressbar" class="progress-bar progress-bar-info">
                                            <span class="sr-only"> {{shipment.percentageComplete}}% Complete </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-6 text-left">
                                    <p class="bold no-margin no-padding">{{shipment.shippedFrom}}</p>
                                    <p class="text-muted no-margin no-padding">{{shipment.shipmentDate| date:'dd MMM yyyy hh:mm a'}}</p>
                                </div>
                                <div class="col-xs-6 text-right">
                                    <p class="bold no-margin no-padding">{{shipment.shippedTo}}</p>
                                    <p class="text-muted no-margin no-padding">
                                    <span ng-if="shipment.status != 'Arrived'">ETA</span>
                                    <span ng-if="shipment.status == 'Arrived'">ARRIVED AT</span>: {{shipment.actualArrivalDate | date:'dd MMM yyyy hh:mm a'}}</p>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        &nbsp;
                                    </div>
                                </div>
                                <div class="text-center shipment-marker" ng-show="{{shipment.siblingCount > 0}}">
                                    {{shipment.siblingCount}} others <i tooltip="Waiting your tooltip text" tooltip-append-to-body="true" tooltip-trigger="mouseenter" tooltip-placement="top" class="fa fa-info-circle"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <pagination class="pagination-sm" max-size="5" on-select-page="PageChanged(page)" total-items="ShipmentList.totalCount" page="ViewShipment.pageIndex" items-per-page="ViewShipment.pageSize" boundary-links="true" rotate="false" first-text="<<" last-text=">>" next-text=">" previous-text="<"></pagination>

        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        setTimeout(function () {
            window.scrollTo(0, 0);     // run it a bit later also for browser compatibility
        }, 1000);
    })
</script>